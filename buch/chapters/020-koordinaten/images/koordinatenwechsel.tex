%
% koordinatenwechsel.tex -- Koordinatenwechsel
%
% (c) 2021 Prof Dr Andreas MÃ¼ller, OST Ostschweizer Fachhochschule
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}
\usetikzlibrary{arrows,intersections,math}
\definecolor{darkred}{rgb}{0.8,0,0}
\begin{document}
\def\skala{1}
\begin{tikzpicture}[>=latex,thick,scale=\skala]

\fill[color=gray!20,rounded corners=0.5cm] (-3.5,-1.8) rectangle (3.5,1.8);
\node at (-2.8,1.2) {$X$};

\fill[color=white,rotate=20] (-1,0) ellipse (2cm and 1cm);
\fill[color=white] (1,0) ellipse (2cm and 1.2cm);

\fill[color=blue!40,opacity=0.5,rotate=20] (-1,0) ellipse (2cm and 1cm);
\node[color=blue] at (-2,-0.8) {$U_\alpha$};
\fill[color=darkred!40,opacity=0.5] (1,0) ellipse (2cm and 1.2cm);
\node[color=darkred] at (2,0) {$U_\beta$};
\node at (0,0) {$U_\alpha\cap U_\beta$};

\draw[->,color=blue] (-2.2,-1.6) -- ++(-0.8,-1.4);
\node[color=blue] at (-2.6,-2.3) [above left] {$\varphi_\alpha$};

\draw[->,color=darkred] (2.2,-1.1) -- ++(0.8,-1.3);
\node[color=darkred] at (2.6,-1.75) [above right] {$\varphi_\beta$};

\draw[->,color=violet] (-2.5,-3.2) arc(125:65:4.2);
\node[color=violet] at (-0.2,-2.8) {$\varphi_\beta\circ\varphi_\alpha^{-1}$};

\begin{scope}[xshift=-3.5cm,yshift=-4cm]
	\fill[color=blue!40,opacity=0.5] (-0.5,0) ellipse (2cm and 1cm);
	\begin{scope}
		\clip (-0.5,0) ellipse (2cm and 1cm);
		\fill[color=darkred!40,opacity=0.5] (1.2,0.2) circle[radius=2];
	\end{scope}
	\node at (0.4,0) {$\varphi_\alpha(U_\alpha\cap U_\beta)$};
	\draw[->] (-2.1,-0.5) -- (2.3,-0.5) coordinate[label={$x^1$}];
	\draw[->] (-1.1,-1.1) -- (-1.1,1.9) coordinate[label={left:$x^2$}];
\end{scope}

\begin{scope}[xshift=3.5cm,yshift=-3.8cm]
	\fill[color=darkred!40,opacity=0.5,rotate=-20]
		(0,0) ellipse (2cm and 1.2cm);
	\begin{scope}
		\clip[rotate=-20] (0,0) ellipse (2cm and 1.2cm);
		\fill[color=blue!40,opacity=0.5,rotate=20]
			(-1,0.7) ellipse (1.4cm and 1.0cm);
	\end{scope}
	\draw[->] (-2.1,-0.5) -- (2.3,-0.5) coordinate[label={$y^1$}];
	\draw[->] (-1.1,-1.3) -- (-1.1,1.7) coordinate[label={left:$y^2$}];
	\node at (-0.9,0.4) {$\varphi_\beta(U_\alpha\cap U_\beta)$};
\end{scope}

\end{tikzpicture}
\end{document}

